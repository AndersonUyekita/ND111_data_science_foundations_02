<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>2.2 SQL Joins | ND111 - Data Science II - Notebook</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="2.2 SQL Joins | ND111 - Data Science II - Notebook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.2 SQL Joins | ND111 - Data Science II - Notebook" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="sql-basics.html">
<link rel="next" href="sql-aggregations.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./" target='_blank'><h3>ND111 - Data Science II</h3></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Course Info</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="sql-for-data-analysis.html"><a href="sql-for-data-analysis.html"><i class="fa fa-check"></i><b>2</b> SQL for Data Analysis</a><ul>
<li class="chapter" data-level="2.1" data-path="sql-basics.html"><a href="sql-basics.html"><i class="fa fa-check"></i><b>2.1</b> SQL Basics</a><ul>
<li class="chapter" data-level="2.1.1" data-path="sql-basics.html"><a href="sql-basics.html#entity-relationship-diagrams-erd"><i class="fa fa-check"></i><b>2.1.1</b> Entity Relationship Diagrams (ERD)</a></li>
<li class="chapter" data-level="2.1.2" data-path="sql-basics.html"><a href="sql-basics.html#sql-introduction"><i class="fa fa-check"></i><b>2.1.2</b> SQL Introduction</a></li>
<li class="chapter" data-level="2.1.3" data-path="sql-basics.html"><a href="sql-basics.html#clauses"><i class="fa fa-check"></i><b>2.1.3</b> Clauses</a></li>
<li class="chapter" data-level="2.1.4" data-path="sql-basics.html"><a href="sql-basics.html#derived-columns"><i class="fa fa-check"></i><b>2.1.4</b> Derived Columns</a></li>
<li class="chapter" data-level="2.1.5" data-path="sql-basics.html"><a href="sql-basics.html#introduction-to-logical-operators"><i class="fa fa-check"></i><b>2.1.5</b> Introduction to “Logical Operators”</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="sql-joins.html"><a href="sql-joins.html"><i class="fa fa-check"></i><b>2.2</b> SQL Joins</a><ul>
<li class="chapter" data-level="2.2.1" data-path="sql-joins.html"><a href="sql-joins.html#joins"><i class="fa fa-check"></i><b>2.2.1</b> Joins</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="sql-aggregations.html"><a href="sql-aggregations.html"><i class="fa fa-check"></i><b>2.3</b> SQL Aggregations</a><ul>
<li class="chapter" data-level="2.3.1" data-path="sql-aggregations.html"><a href="sql-aggregations.html#aggregations-functions"><i class="fa fa-check"></i><b>2.3.1</b> Aggregations Functions</a></li>
<li class="chapter" data-level="2.3.2" data-path="sql-aggregations.html"><a href="sql-aggregations.html#functions"><i class="fa fa-check"></i><b>2.3.2</b> Functions</a></li>
<li class="chapter" data-level="2.3.3" data-path="sql-aggregations.html"><a href="sql-aggregations.html#date"><i class="fa fa-check"></i><b>2.3.3</b> DATE</a></li>
<li class="chapter" data-level="2.3.4" data-path="sql-aggregations.html"><a href="sql-aggregations.html#case"><i class="fa fa-check"></i><b>2.3.4</b> CASE</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="sql-subqueries-temporary-tables-advanced.html"><a href="sql-subqueries-temporary-tables-advanced.html"><i class="fa fa-check"></i><b>2.4</b> SQL Subqueries &amp; Temporary Tables (Advanced)</a><ul>
<li class="chapter" data-level="2.4.1" data-path="sql-subqueries-temporary-tables-advanced.html"><a href="sql-subqueries-temporary-tables-advanced.html#subqueries"><i class="fa fa-check"></i><b>2.4.1</b> Subqueries</a></li>
<li class="chapter" data-level="2.4.2" data-path="sql-subqueries-temporary-tables-advanced.html"><a href="sql-subqueries-temporary-tables-advanced.html#with"><i class="fa fa-check"></i><b>2.4.2</b> WITH</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-cleaning-advanced.html"><a href="data-cleaning-advanced.html"><i class="fa fa-check"></i><b>2.5</b> Data Cleaning (Advanced)</a><ul>
<li class="chapter" data-level="2.5.1" data-path="data-cleaning-advanced.html"><a href="data-cleaning-advanced.html#data-cleaning"><i class="fa fa-check"></i><b>2.5.1</b> Data Cleaning</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="project-01-chinook.html"><a href="project-01-chinook.html"><i class="fa fa-check"></i><b>2.6</b> Project 01 - Chinook</a><ul>
<li class="chapter" data-level="2.6.1" data-path="project-01-chinook.html"><a href="project-01-chinook.html#project-submission"><i class="fa fa-check"></i><b>2.6.1</b> Project Submission</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>3</b> Data Wrangling</a><ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-data-wrangling.html"><a href="introduction-to-data-wrangling.html"><i class="fa fa-check"></i><b>3.1</b> Introduction to Data Wrangling</a><ul>
<li class="chapter" data-level="3.1.1" data-path="introduction-to-data-wrangling.html"><a href="introduction-to-data-wrangling.html#gathering"><i class="fa fa-check"></i><b>3.1.1</b> Gathering</a></li>
<li class="chapter" data-level="3.1.2" data-path="introduction-to-data-wrangling.html"><a href="introduction-to-data-wrangling.html#assessing"><i class="fa fa-check"></i><b>3.1.2</b> Assessing</a></li>
<li class="chapter" data-level="3.1.3" data-path="introduction-to-data-wrangling.html"><a href="introduction-to-data-wrangling.html#assessing-the-data"><i class="fa fa-check"></i><b>3.1.3</b> Assessing the data</a></li>
<li class="chapter" data-level="3.1.4" data-path="introduction-to-data-wrangling.html"><a href="introduction-to-data-wrangling.html#cleaning"><i class="fa fa-check"></i><b>3.1.4</b> Cleaning</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-gathering.html"><a href="data-gathering.html"><i class="fa fa-check"></i><b>3.2</b> Data Gathering</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-gathering.html"><a href="data-gathering.html#flat-file"><i class="fa fa-check"></i><b>3.2.1</b> Flat File</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-gathering.html"><a href="data-gathering.html#web-scraping"><i class="fa fa-check"></i><b>3.2.2</b> Web Scraping</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-gathering.html"><a href="data-gathering.html#http-request"><i class="fa fa-check"></i><b>3.2.3</b> HTTP Request</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-gathering.html"><a href="data-gathering.html#encoding-and-character-set"><i class="fa fa-check"></i><b>3.2.4</b> Encoding and Character Set</a></li>
<li class="chapter" data-level="3.2.5" data-path="data-gathering.html"><a href="data-gathering.html#application-programming-interfaces---api"><i class="fa fa-check"></i><b>3.2.5</b> Application Programming Interfaces - API</a></li>
<li class="chapter" data-level="3.2.6" data-path="data-gathering.html"><a href="data-gathering.html#json-and-xml"><i class="fa fa-check"></i><b>3.2.6</b> JSON and XML</a></li>
<li class="chapter" data-level="3.2.7" data-path="data-gathering.html"><a href="data-gathering.html#methods-in-this-lesson"><i class="fa fa-check"></i><b>3.2.7</b> Methods in this Lesson</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="assessing-data.html"><a href="assessing-data.html"><i class="fa fa-check"></i><b>3.3</b> Assessing Data</a><ul>
<li class="chapter" data-level="3.3.1" data-path="assessing-data.html"><a href="assessing-data.html#assess-proccess"><i class="fa fa-check"></i><b>3.3.1</b> Assess Proccess</a></li>
<li class="chapter" data-level="3.3.2" data-path="assessing-data.html"><a href="assessing-data.html#data-quality-dimensions"><i class="fa fa-check"></i><b>3.3.2</b> Data Quality Dimensions</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="cleaning-data.html"><a href="cleaning-data.html"><i class="fa fa-check"></i><b>3.4</b> Cleaning Data</a><ul>
<li class="chapter" data-level="3.4.1" data-path="cleaning-data.html"><a href="cleaning-data.html#tidiness-1"><i class="fa fa-check"></i><b>3.4.1</b> Tidiness</a></li>
<li class="chapter" data-level="3.4.2" data-path="cleaning-data.html"><a href="cleaning-data.html#quality-1"><i class="fa fa-check"></i><b>3.4.2</b> Quality</a></li>
<li class="chapter" data-level="3.4.3" data-path="cleaning-data.html"><a href="cleaning-data.html#methods"><i class="fa fa-check"></i><b>3.4.3</b> Methods</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="project-02-wrangle-and-analyze-data.html"><a href="project-02-wrangle-and-analyze-data.html"><i class="fa fa-check"></i><b>3.5</b> Project 02 - Wrangle and Analyze Data</a><ul>
<li class="chapter" data-level="3.5.1" data-path="project-02-wrangle-and-analyze-data.html"><a href="project-02-wrangle-and-analyze-data.html#project-submission-1"><i class="fa fa-check"></i><b>3.5.1</b> Project Submission</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i><b>4</b> Applications</a><ul>
<li class="chapter" data-level="4.1" data-path="example-one.html"><a href="example-one.html"><i class="fa fa-check"></i><b>4.1</b> Example one</a></li>
<li class="chapter" data-level="4.2" data-path="example-two.html"><a href="example-two.html"><i class="fa fa-check"></i><b>4.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="intro-to-machine-learning.html"><a href="intro-to-machine-learning.html"><i class="fa fa-check"></i><b>5</b> Intro to Machine Learning</a></li>
<li class="chapter" data-level="6" data-path="data-visualization-optional.html"><a href="data-visualization-optional.html"><i class="fa fa-check"></i><b>6</b> Data Visualization (Optional)</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ND111 - Data Science II - Notebook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sql-joins" class="section level2">
<h2><span class="header-section-number">2.2</span> SQL Joins</h2>
<div id="joins" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Joins</h3>
<p>When a table is splited the performance to update or just to make a query is better than a big one. The reason is the quantity of data to read. This is one of the reason to split dataset in several tables, even more, sometimes in convinient to split because the type of data stored.</p>
<p>The reason of JOIN is to “bind” two datasets into one. Here we need to use the period <code>.</code> (table.colums) to reference which column/variable we want to select.</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> accounts.name, orders.occurred_at
  <span class="kw">FROM</span> orders
<span class="kw">JOIN</span> accounts
<span class="kw">ON</span> orders.account_id = accounts.id;</code></pre></div>
<p>The result of this query is two columns (<code>name</code> and <code>occured_at</code>), and to linked by the <code>account_id</code> and <code>id</code>.</p>
<div id="primary-key-pk" class="section level4">
<h4><span class="header-section-number">2.2.1.1</span> Primary Key (PK)</h4>
<p>Is a columns with unique values used to map a variable.</p>
</div>
<div id="foreign-key-fk" class="section level4">
<h4><span class="header-section-number">2.2.1.2</span> Foreign Key (FK)</h4>
<p>Is a Primary Key from the other table. We use the PK and FK to link the tables.</p>
<p>Based on the new information about <code>PK</code> and <code>FK</code>. Let’s insert a picture to visualize the database.</p>
<div class="figure">
<img src="01-img/1.png" alt="Example of Join" />
<p class="caption">Example of Join</p>
</div>
<p>I want to Join these tables. My query:</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> orders.*
<span class="kw">FROM</span> orders
<span class="kw">JOIN</span> accounts
<span class="kw">ON</span> orders.account_id = accounts.id;</code></pre></div>
<p>What I need to realize:</p>
<ul>
<li><code>PK</code> and <code>FK</code> <strong>always</strong> will be allocated in <code>ON</code>.</li>
<li><code>FROM</code> and <code>JOIN</code> each one with one table.</li>
</ul>
</div>
<div id="binding-three-tables" class="section level4">
<h4><span class="header-section-number">2.2.1.3</span> Binding three tables</h4>
<p>It is possible to “chaining” three tables.</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> *
<span class="kw">FROM</span> web_events
<span class="kw">JOIN</span> accounts
<span class="kw">ON</span> web_events.account_id = accounts.id
<span class="kw">JOIN</span> orders
<span class="kw">ON</span> accounts.id = orders.account_id</code></pre></div>
<p>In this case, I will import all columns, but I may want few columns.</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> web_events.channel, accounts.name, orders.total
<span class="kw">FROM</span> web_events
<span class="kw">JOIN</span> accounts
<span class="kw">ON</span> web_events.account_id = accounts.id
<span class="kw">JOIN</span> orders
<span class="kw">ON</span> accounts.id = orders.account_id</code></pre></div>
</div>
<div id="alias" class="section level4">
<h4><span class="header-section-number">2.2.1.4</span> Alias</h4>
<p>Alias is a form to “short” the name of columns, the first method is using <code>AS</code>, but it could be simplified by only a space.</p>
<ul>
<li>Example 1</li>
</ul>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">Select</span> t1.column1 aliasname, t2.column2 aliasname2
<span class="kw">FROM</span> tablename <span class="kw">AS</span> t1
<span class="kw">JOIN</span> tablename2 <span class="kw">AS</span> t2</code></pre></div>
<p><strong>or</strong></p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">Select</span> t1.column1 aliasname, t2.column2 aliasname2
<span class="kw">FROM</span> tablename t1
<span class="kw">JOIN</span> tablename2 t2</code></pre></div>
<ul>
<li>Example 2</li>
</ul>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> col1 + col2 <span class="kw">AS</span> total, col3</code></pre></div>
<p><strong>or</strong></p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> col1 + col2 total, col3</code></pre></div>
<p><strong>or</strong></p>
</div>
<div id="inner-join" class="section level4">
<h4><span class="header-section-number">2.2.1.5</span> <code>INNER JOIN</code></h4>
<p>Returns rows which appears in both tables.</p>
<div class="sourceCode"><pre class="sourceCode sql"><code class="sourceCode sql"><span class="kw">SELECT</span> table_1.id, table_1.name, table_2.total
  <span class="kw">FROM</span> table_<span class="dv">2</span>
    <span class="kw">JOIN</span> table_<span class="dv">1</span>
      <span class="kw">ON</span> table_2.account_id = table_1.id</code></pre></div>
<p>These last examples are all <code>INNER JOINS</code>, and will return a new dataframe (intersection between two dataframes).</p>
</div>
<div id="outer-join" class="section level4">
<h4><span class="header-section-number">2.2.1.6</span> <code>OUTER JOIN</code></h4>
<p>There are two kinds of OUTER JOINs</p>
<ul>
<li>Left outer JOIN, and;</li>
<li>Right outer JOIN.</li>
</ul>
<p>This two new JOINs has a property to pull rows that only exist in one table, it means some rows might have NULL values. The standard for this course will be to use only the left outer join.</p>
</div>
</div>
</div>
&nbsp;
<hr />
<p style="text-align: center;">A work by <a href="https://andersonuyekita.github.io/site/cv.html">AH Uyekita</a></p>
<p style="text-align: center;"><span style="color: #808080;"><em>anderson.uyekita[at]gmail.com</em></span></p>

<!-- Add icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- Add font awesome icons -->
<p style="text-align: center;">
    <a href="https://linkedin.com/in/andersonuyekita/" class="fa fa-linkedin"></a>
    <a href="https://github.com/AndersonUyekita/" class="fa fa-github"></a>
</p>

&nbsp;
            </section>

          </div>
        </div>
      </div>
<a href="sql-basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sql-aggregations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["nd111_-_data_science_ii.pdf", "nd111_-_data_science_ii.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
